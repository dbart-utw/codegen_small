
#include "header.h"


static const int32_t num_class[] = {  6, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 36;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[32].missing != -1) || (data[32].fvalue <= (float)81) ) ) {
    result[0] += 0.30822281167108756;
    result[1] += 0.1427055702917772;
    result[2] += 0.03580901856763926;
    result[3] += 0.10238726790450928;
    result[4] += 0.1323607427055703;
    result[5] += 0.27851458885941643;
  } else {
    result[0] += 0.010416666666666668;
    result[1] += 0.0009469696969696971;
    result[2] += 0.8276515151515152;
    result[3] += 0.10132575757575758;
    result[4] += 0.00662878787878788;
    result[5] += 0.05303030303030304;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.3095301300769843;
    result[1] += 0.1396336607379878;
    result[2] += 0.03291744093443058;
    result[3] += 0.08839925670294664;
    result[4] += 0.13140430050438015;
    result[5] += 0.2981152110432705;
  } else {
    result[0] += 0.012275731822474033;
    result[1] += 0.010387157695939567;
    result[2] += 0.8111425873465534;
    result[3] += 0.11520302171860247;
    result[4] += 0.004721435316336167;
    result[5] += 0.04627006610009444;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)81) ) ) {
    result[0] += 0.29541235746486344;
    result[1] += 0.13922036595067622;
    result[2] += 0.03712543092018032;
    result[3] += 0.09997348183505701;
    result[4] += 0.13550782285865817;
    result[5] += 0.29276054097056486;
  } else {
    result[0] += 0.011374407582938388;
    result[1] += 0.014218009478672985;
    result[2] += 0.8056872037914692;
    result[3] += 0.09289099526066351;
    result[4] += 0.0037914691943127963;
    result[5] += 0.07203791469194312;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)79.5) ) ) {
    result[0] += 0.31425426527242706;
    result[1] += 0.14749587231700606;
    result[2] += 0.02806824435883324;
    result[3] += 0.08585580627407816;
    result[4] += 0.1364887176664832;
    result[5] += 0.28783709411117225;
  } else {
    result[0] += 0.016778523489932886;
    result[1] += 0.0041946308724832215;
    result[2] += 0.7676174496644296;
    result[3] += 0.13758389261744966;
    result[4] += 0.008389261744966443;
    result[5] += 0.06543624161073826;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)81) ) ) {
    result[0] += 0.2988110964332893;
    result[1] += 0.1365918097754293;
    result[2] += 0.03593130779392338;
    result[3] += 0.09801849405548217;
    result[4] += 0.14663143989431968;
    result[5] += 0.28401585204755614;
  } else {
    result[0] += 0.013448607108549471;
    result[1] += 0.011527377521613832;
    result[2] += 0.792507204610951;
    result[3] += 0.10566762728146013;
    result[4] += 0.0019212295869356388;
    result[5] += 0.07492795389048991;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)81) ) ) {
    result[0] += 0.29644373673036095;
    result[1] += 0.13667728237791932;
    result[2] += 0.031581740976645435;
    result[3] += 0.09660297239915075;
    result[4] += 0.14012738853503184;
    result[5] += 0.29856687898089174;
  } else {
    result[0] += 0.004725897920604915;
    result[1] += 0.007561436672967864;
    result[2] += 0.8241965973534972;
    result[3] += 0.10964083175803403;
    result[4] += 0.001890359168241966;
    result[5] += 0.05198487712665406;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)81) ) ) {
    result[0] += 0.3190702588483888;
    result[1] += 0.1381405176967776;
    result[2] += 0.023507659799260432;
    result[3] += 0.09165346011621764;
    result[4] += 0.13444268357105124;
    result[5] += 0.2931854199683043;
  } else {
    result[0] += 0.010576923076923078;
    result[1] += 0;
    result[2] += 0.8451923076923077;
    result[3] += 0.1125;
    result[4] += 0.0009615384615384616;
    result[5] += 0.03076923076923077;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)82.5) ) ) {
    result[0] += 0.31388961548522104;
    result[1] += 0.134449385299503;
    result[2] += 0.03766675385822652;
    result[3] += 0.09573633272299241;
    result[4] += 0.14229662568663354;
    result[5] += 0.2759612869474235;
  } else {
    result[0] += 0.009970089730807577;
    result[1] += 0;
    result[2] += 0.8803589232303091;
    result[3] += 0.08175473579262213;
    result[4] += 0;
    result[5] += 0.027916251246261216;
  }
  if ( ( !(data[0].missing != -1) || (data[0].fvalue <= (float)79.5) ) ) {
    result[0] += 0.31809256661991586;
    result[1] += 0.1438990182328191;
    result[2] += 0.026928471248246846;
    result[3] += 0.08892005610098176;
    result[4] += 0.14333800841514727;
    result[5] += 0.2788218793828892;
  } else {
    result[0] += 0.029341792228390166;
    result[1] += 0.008723235527359239;
    result[2] += 0.7398889770023791;
    result[3] += 0.12846946867565423;
    result[4] += 0.01586042823156225;
    result[5] += 0.07771609833465504;
  }
  if ( ( !(data[24].missing != -1) || (data[24].fvalue <= (float)81) ) ) {
    result[0] += 0.30866864704293817;
    result[1] += 0.1358358088036727;
    result[2] += 0.03429651633810424;
    result[3] += 0.0939778557926006;
    result[4] += 0.13043478260869565;
    result[5] += 0.29678638941398866;
  } else {
    result[0] += 0.012466607301869992;
    result[1] += 0.01157613535173642;
    result[2] += 0.7969723953695459;
    result[3] += 0.10863757791629564;
    result[4] += 0.007123775601068566;
    result[5] += 0.06322350845948353;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)81) ) ) {
    result[0] += 0.3171572527181119;
    result[1] += 0.14160700079554495;
    result[2] += 0.020949350304958897;
    result[3] += 0.0967913020418987;
    result[4] += 0.13789445770352693;
    result[5] += 0.2856006364359586;
  } else {
    result[0] += 0.010426540284360191;
    result[1] += 0;
    result[2] += 0.8549763033175356;
    result[3] += 0.10331753554502371;
    result[4] += 0;
    result[5] += 0.03127962085308057;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.2893524790029802;
    result[1] += 0.14440531021403413;
    result[2] += 0.030073150907613113;
    result[3] += 0.09238688702248712;
    result[4] += 0.14088322947710646;
    result[5] += 0.30289894337577894;
  } else {
    result[0] += 0.022026431718061675;
    result[1] += 0.007048458149779736;
    result[2] += 0.8079295154185022;
    result[3] += 0.10837004405286343;
    result[4] += 0.007929515418502203;
    result[5] += 0.04669603524229075;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)81) ) ) {
    result[0] += 0.3078363198716234;
    result[1] += 0.14388874030489435;
    result[2] += 0.03423375234019791;
    result[3] += 0.08478202728002139;
    result[4] += 0.13559775341000269;
    result[5] += 0.29366140679326025;
  } else {
    result[0] += 0.007359705611775529;
    result[1] += 0.0027598896044158236;
    result[2] += 0.8380864765409384;
    result[3] += 0.10027598896044158;
    result[4] += 0.0036798528058877645;
    result[5] += 0.04783808647654094;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)81) ) ) {
    result[0] += 0.2865079365079365;
    result[1] += 0.13915343915343914;
    result[2] += 0.034126984126984124;
    result[3] += 0.09576719576719576;
    result[4] += 0.14603174603174604;
    result[5] += 0.2984126984126984;
  } else {
    result[0] += 0.008604206500956023;
    result[1] += 0.016252390057361378;
    result[2] += 0.7858508604206501;
    result[3] += 0.11089866156787763;
    result[4] += 0.0057361376673040155;
    result[5] += 0.07265774378585087;
  }
  if ( ( !(data[19].missing != -1) || (data[19].fvalue <= (float)72.5) ) ) {
    result[0] += 0.024010382868267358;
    result[1] += 0.007138221933809215;
    result[2] += 0.003893575600259572;
    result[3] += 0.1135626216742375;
    result[4] += 0.20311486048020766;
    result[5] += 0.6482803374432187;
  } else {
    result[0] += 0.3582952815829529;
    result[1] += 0.15220700152207003;
    result[2] += 0.28371385083713857;
    result[3] += 0.08828006088280062;
    result[4] += 0.06392694063926942;
    result[5] += 0.053576864535768653;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)81) ) ) {
    result[0] += 0.3047345017002354;
    result[1] += 0.14465079780277268;
    result[2] += 0.03295840962594821;
    result[3] += 0.08893539105414595;
    result[4] += 0.13784985613392622;
    result[5] += 0.2908710436829715;
  } else {
    result[0] += 0.0029910269192422725;
    result[1] += 0.00398803589232303;
    result[2] += 0.8205383848454634;
    result[3] += 0.11465603190428711;
    result[4] += 0.006979062811565302;
    result[5] += 0.050847457627118633;
  }
  if ( ( !(data[15].missing != -1) || (data[15].fvalue <= (float)74.5) ) ) {
    result[0] += 0.04105571847507331;
    result[1] += 0.00997067448680352;
    result[2] += 0.007038123167155425;
    result[3] += 0.14486803519061583;
    result[4] += 0.17595307917888564;
    result[5] += 0.6211143695014663;
  } else {
    result[0] += 0.35597564883050303;
    result[1] += 0.15603973085549502;
    result[2] += 0.30150592758731176;
    result[3] += 0.07882089074014739;
    result[4] += 0.061839154117270104;
    result[5] += 0.04581864786927267;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.30315064866296004;
    result[1] += 0.14350013238019593;
    result[2] += 0.028594122319301033;
    result[3] += 0.09478422028064601;
    result[4] += 0.13158591474715384;
    result[5] += 0.2983849616097432;
  } else {
    result[0] += 0.01906577693040992;
    result[1] += 0.003813155386081983;
    result[2] += 0.8064823641563394;
    result[3] += 0.12011439466158247;
    result[4] += 0.006673021925643471;
    result[5] += 0.04385128693994281;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)78.5) ) ) {
    result[0] += 0.3396860986547085;
    result[1] += 0.14798206278026907;
    result[2] += 0.015975336322869956;
    result[3] += 0.07623318385650224;
    result[4] += 0.12780269058295965;
    result[5] += 0.2923206278026906;
  } else {
    result[0] += 0.017488076311605726;
    result[1] += 0.007949125596184421;
    result[2] += 0.7201907790143085;
    result[3] += 0.1605723370429253;
    result[4] += 0.007154213036565979;
    result[5] += 0.08664546899841019;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)81) ) ) {
    result[0] += 0.3054371002132196;
    result[1] += 0.14445628997867804;
    result[2] += 0.03331556503198294;
    result[3] += 0.09594882729211088;
    result[4] += 0.13166311300639658;
    result[5] += 0.2891791044776119;
  } else {
    result[0] += 0.0148975791433892;
    result[1] += 0.006517690875232775;
    result[2] += 0.8007448789571695;
    result[3] += 0.11452513966480447;
    result[4] += 0.008379888268156424;
    result[5] += 0.05493482309124767;
  }
  if ( ( !(data[4].missing != -1) || (data[4].fvalue <= (float)78.5) ) ) {
    result[0] += 0.3207494407158837;
    result[1] += 0.1401006711409396;
    result[2] += 0.015659955257270694;
    result[3] += 0.08221476510067115;
    result[4] += 0.14821029082774048;
    result[5] += 0.2930648769574944;
  } else {
    result[0] += 0.0312;
    result[1] += 0.0112;
    result[2] += 0.7208;
    result[3] += 0.144;
    result[4] += 0.0168;
    result[5] += 0.076;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)81) ) ) {
    result[0] += 0.3121834177552653;
    result[1] += 0.14636097040789126;
    result[2] += 0.026659557451346315;
    result[3] += 0.08877632631298321;
    result[4] += 0.12796587576646232;
    result[5] += 0.29805385230605175;
  } else {
    result[0] += 0.013953488372093025;
    result[1] += 0;
    result[2] += 0.8400000000000001;
    result[3] += 0.11441860465116281;
    result[4] += 0.000930232558139535;
    result[5] += 0.030697674418604656;
  }
  if ( ( !(data[0].missing != -1) || (data[0].fvalue <= (float)78.5) ) ) {
    result[0] += 0.31313424180922006;
    result[1] += 0.1614960858219774;
    result[2] += 0.014496955639315743;
    result[3] += 0.07712380400115976;
    result[4] += 0.13366193099449117;
    result[5] += 0.3000869817338359;
  } else {
    result[0] += 0.038489469862018885;
    result[1] += 0.01234567901234568;
    result[2] += 0.6986201888162673;
    result[3] += 0.1554103122730574;
    result[4] += 0.014524328249818448;
    result[5] += 0.08061002178649239;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.3048417635921017;
    result[1] += 0.1319989180416554;
    result[2] += 0.025967000270489586;
    result[3] += 0.08953205301595889;
    result[4] += 0.1409250743846362;
    result[5] += 0.30673519069515826;
  } else {
    result[0] += 0.01682905225863596;
    result[1] += 0.0070859167404783;
    result[2] += 0.8113374667847653;
    result[3] += 0.11780336581045173;
    result[4] += 0.005314437555358724;
    result[5] += 0.04162976085031001;
  }
  if ( ( !(data[24].missing != -1) || (data[24].fvalue <= (float)81) ) ) {
    result[0] += 0.3034905409006129;
    result[1] += 0.1412203570476952;
    result[2] += 0.030908606448174798;
    result[3] += 0.09245936584066082;
    result[4] += 0.12949640287769787;
    result[5] += 0.3024247268851586;
  } else {
    result[0] += 0.009319664492078284;
    result[1] += 0.007455731593662628;
    result[2] += 0.8126747437092264;
    result[3] += 0.10531220876048462;
    result[4] += 0.007455731593662628;
    result[5] += 0.05778191985088537;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.31108719052744893;
    result[1] += 0.13589881593110875;
    result[2] += 0.02879440258342304;
    result[3] += 0.0931108719052745;
    result[4] += 0.13078579117330466;
    result[5] += 0.3003229278794403;
  } else {
    result[0] += 0.01711711711711712;
    result[1] += 0.00900900900900901;
    result[2] += 0.8072072072072073;
    result[3] += 0.13063063063063066;
    result[4] += 0.003603603603603604;
    result[5] += 0.03243243243243244;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)81) ) ) {
    result[0] += 0.30582911897790793;
    result[1] += 0.14107000266169817;
    result[2] += 0.023955283470854405;
    result[3] += 0.09422411498536067;
    result[4] += 0.1362789459675273;
    result[5] += 0.2986425339366516;
  } else {
    result[0] += 0.013096351730589336;
    result[1] += 0;
    result[2] += 0.8278765201122544;
    result[3] += 0.1225444340505145;
    result[4] += 0.0009354536950420954;
    result[5] += 0.03554724041159962;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)79.5) ) ) {
    result[0] += 0.30982019363762103;
    result[1] += 0.15131396957123097;
    result[2] += 0.021300138312586446;
    result[3] += 0.08409405255878286;
    result[4] += 0.14356846473029045;
    result[5] += 0.28990318118948827;
  } else {
    result[0] += 0.02064409578860446;
    result[1] += 0.011560693641618497;
    result[2] += 0.7687861271676301;
    result[3] += 0.1329479768786127;
    result[4] += 0.013212221304706853;
    result[5] += 0.05284888521882741;
  }
  if ( ( !(data[4].missing != -1) || (data[4].fvalue <= (float)81) ) ) {
    result[0] += 0.31660026560424964;
    result[1] += 0.13359893758300131;
    result[2] += 0.03266932270916335;
    result[3] += 0.0903054448871182;
    result[4] += 0.13094289508632137;
    result[5] += 0.2958831341301461;
  } else {
    result[0] += 0.03110273327049953;
    result[1] += 0.00942507068803016;
    result[2] += 0.7926484448633365;
    result[3] += 0.11592836946277098;
    result[4] += 0.006597549481621112;
    result[5] += 0.04429783223374175;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.308371222251939;
    result[1] += 0.1479005081572613;
    result[2] += 0.028617277346884195;
    result[3] += 0.0917357582241241;
    result[4] += 0.13212088793795132;
    result[5] += 0.2912543460818401;
  } else {
    result[0] += 0.010119595216191352;
    result[1] += 0.007359705611775529;
    result[2] += 0.8160073597056118;
    result[3] += 0.11499540018399264;
    result[4] += 0.0027598896044158236;
    result[5] += 0.04875804967801288;
  }
  
  // Average tree outputs
  result[0] /= 30;
  result[1] /= 30;
  result[2] /= 30;
  result[3] /= 30;
  result[4] /= 30;
  result[5] /= 30;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_146/split_3/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
