
#include "header.h"


static const int32_t num_class[] = {  6, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 36;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[19].missing != -1) || ((*( ((int*)(data)) + 19 ))<=((int)(0x42970000))) ) ) {
    result[0] += 0.06561974200785194;
    result[1] += 0.003925967470555244;
    result[2] += 0.007851934941110488;
    result[3] += 0.1525518788558609;
    result[4] += 0.20695457094784073;
    result[5] += 0.5630959057767807;
  } else {
    result[0] += 0.345054222806441;
    result[1] += 0.16464015773907328;
    result[2] += 0.32632270785409134;
    result[3] += 0.07032533683864607;
    result[4] += 0.05948077555044364;
    result[5] += 0.034176799211304634;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x429d0000))) ) ) {
    result[0] += 0.3207762557077626;
    result[1] += 0.15011415525114155;
    result[2] += 0.019121004566210045;
    result[3] += 0.07990867579908675;
    result[4] += 0.1521118721461187;
    result[5] += 0.2779680365296804;
  } else {
    result[0] += 0.03479576399394856;
    result[1] += 0.00832072617246596;
    result[2] += 0.7405446293494705;
    result[3] += 0.12405446293494705;
    result[4] += 0.007564296520423601;
    result[5] += 0.08472012102874432;
  }
  if ( ( !(data[35].missing != -1) || ((*( ((int*)(data)) + 35 ))<=((int)(0x42930000))) ) ) {
    result[0] += 0.026131293817718292;
    result[1] += 0.022307202039515615;
    result[2] += 0.022944550669216062;
    result[3] += 0.1516889738687062;
    result[4] += 0.18674314850223073;
    result[5] += 0.5901848311026131;
  } else {
    result[0] += 0.35093644458090273;
    result[1] += 0.14952410193429538;
    result[2] += 0.2821614983113295;
    result[3] += 0.07000307031010133;
    result[4] += 0.08289837273564632;
    result[5] += 0.06447651212772491;
  }
  if ( ( !(data[28].missing != -1) || ((*( ((int*)(data)) + 28 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3061170911000263;
    result[1] += 0.14334470989761092;
    result[2] += 0.034129692832764506;
    result[3] += 0.08584930427933841;
    result[4] += 0.1443948542924652;
    result[5] += 0.2861643475977947;
  } else {
    result[0] += 0.007866273352999019;
    result[1] += 0.006882989183874141;
    result[2] += 0.8298918387413964;
    result[3] += 0.10127826941986236;
    result[4] += 0.006882989183874141;
    result[5] += 0.04719764011799411;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3048910154173312;
    result[1] += 0.14300903774587986;
    result[2] += 0.03561935140882509;
    result[3] += 0.09649122807017543;
    result[4] += 0.14912280701754385;
    result[5] += 0.27086656034024453;
  } else {
    result[0] += 0.01973684210526316;
    result[1] += 0.0075187969924812035;
    result[2] += 0.8204887218045114;
    result[3] += 0.0911654135338346;
    result[4] += 0.005639097744360903;
    result[5] += 0.055451127819548876;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3157051282051282;
    result[1] += 0.14423076923076922;
    result[2] += 0.03231837606837607;
    result[3] += 0.09748931623931624;
    result[4] += 0.13034188034188035;
    result[5] += 0.2799145299145299;
  } else {
    result[0] += 0.014787430683918669;
    result[1] += 0.011090573012939002;
    result[2] += 0.8197781885397413;
    result[3] += 0.10536044362292052;
    result[4] += 0.0073937153419593345;
    result[5] += 0.041589648798521256;
  }
  if ( ( !(data[31].missing != -1) || ((*( ((int*)(data)) + 31 ))<=((int)(0x428f0000))) ) ) {
    result[0] += 0.024216524216524215;
    result[1] += 0.019230769230769232;
    result[2] += 0.012108262108262107;
    result[3] += 0.09259259259259259;
    result[4] += 0.19230769230769232;
    result[5] += 0.6595441595441596;
  } else {
    result[0] += 0.3410286382232613;
    result[1] += 0.1420222092343659;
    result[2] += 0.2901811805961427;
    result[3] += 0.08766803039158388;
    result[4] += 0.07773232028053771;
    result[5] += 0.06136762127410871;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.31268279712842334;
    result[1] += 0.13959053443233185;
    result[2] += 0.03589470885402819;
    result[3] += 0.08800850837543207;
    result[4] += 0.13427279978729065;
    result[5] += 0.2895506514224941;
  } else {
    result[0] += 0.0215962441314554;
    result[1] += 0.007511737089201878;
    result[2] += 0.8046948356807512;
    result[3] += 0.10328638497652583;
    result[4] += 0.009389671361502348;
    result[5] += 0.05352112676056338;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.315505132360886;
    result[1] += 0.14883846569421935;
    result[2] += 0.03403565640194489;
    result[3] += 0.09832522960561858;
    result[4] += 0.12857914640734738;
    result[5] += 0.2747163695299838;
  } else {
    result[0] += 0.02402135231316726;
    result[1] += 0.005338078291814947;
    result[2] += 0.8096085409252669;
    result[3] += 0.10320284697508897;
    result[4] += 0.009786476868327402;
    result[5] += 0.04804270462633452;
  }
  if ( ( !(data[28].missing != -1) || ((*( ((int*)(data)) + 28 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3082983193277311;
    result[1] += 0.14600840336134455;
    result[2] += 0.03807773109243697;
    result[3] += 0.08876050420168068;
    result[4] += 0.14259453781512604;
    result[5] += 0.2762605042016807;
  } else {
    result[0] += 0.005893909626719058;
    result[1] += 0.005893909626719058;
    result[2] += 0.8310412573673871;
    result[3] += 0.10903732809430257;
    result[4] += 0.002946954813359529;
    result[5] += 0.04518664047151278;
  }
  if ( ( !(data[20].missing != -1) || ((*( ((int*)(data)) + 20 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3139968068121341;
    result[1] += 0.1373070782331027;
    result[2] += 0.03565726450239489;
    result[3] += 0.09153805215540181;
    result[4] += 0.15114422565194252;
    result[5] += 0.27035657264502394;
  } else {
    result[0] += 0.00749063670411985;
    result[1] += 0.013108614232209739;
    result[2] += 0.8295880149812734;
    result[3] += 0.10486891385767791;
    result[4] += 0;
    result[5] += 0.0449438202247191;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x429f0000))) ) ) {
    result[0] += 0.319966814159292;
    result[1] += 0.14491150442477876;
    result[2] += 0.019358407079646017;
    result[3] += 0.08821902654867257;
    result[4] += 0.1515486725663717;
    result[5] += 0.27599557522123896;
  } else {
    result[0] += 0.023966942148760332;
    result[1] += 0.011570247933884297;
    result[2] += 0.7586776859504132;
    result[3] += 0.14132231404958678;
    result[4] += 0.010743801652892562;
    result[5] += 0.05371900826446281;
  }
  if ( ( !(data[20].missing != -1) || ((*( ((int*)(data)) + 20 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.32356076759061836;
    result[1] += 0.13752665245202558;
    result[2] += 0.037846481876332626;
    result[3] += 0.09408315565031983;
    result[4] += 0.13459488272921108;
    result[5] += 0.27238805970149255;
  } else {
    result[0] += 0.008379888268156426;
    result[1] += 0.010242085661080076;
    result[2] += 0.846368715083799;
    result[3] += 0.09404096834264433;
    result[4] += 0;
    result[5] += 0.0409683426443203;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x429f0000))) ) ) {
    result[0] += 0.3142303433001108;
    result[1] += 0.15060908084163901;
    result[2] += 0.021594684385382062;
    result[3] += 0.08361018826135107;
    result[4] += 0.141749723145072;
    result[5] += 0.2882059800664452;
  } else {
    result[0] += 0.023064250411861616;
    result[1] += 0.006589785831960461;
    result[2] += 0.7891268533772653;
    result[3] += 0.11367380560131796;
    result[4] += 0.005766062602965404;
    result[5] += 0.06177924217462932;
  }
  if ( ( !(data[16].missing != -1) || ((*( ((int*)(data)) + 16 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.29997338301836574;
    result[1] += 0.14053766302901252;
    result[2] += 0.02528613255256854;
    result[3] += 0.09608730369976044;
    result[4] += 0.14719190843758317;
    result[5] += 0.2909236092627096;
  } else {
    result[0] += 0.011225444340505144;
    result[1] += 0;
    result[2] += 0.8606173994387278;
    result[3] += 0.09073900841908325;
    result[4] += 0.0018709073900841909;
    result[5] += 0.03554724041159962;
  }
  if ( ( !(data[15].missing != -1) || ((*( ((int*)(data)) + 15 ))<=((int)(0x42930000))) ) ) {
    result[0] += 0.03717948717948718;
    result[1] += 0.007051282051282051;
    result[2] += 0.000641025641025641;
    result[3] += 0.1294871794871795;
    result[4] += 0.21602564102564104;
    result[5] += 0.6096153846153847;
  } else {
    result[0] += 0.3374157991426822;
    result[1] += 0.15584813227189226;
    result[2] += 0.312614819350888;
    result[3] += 0.07501530924678507;
    result[4] += 0.07072872014696878;
    result[5] += 0.04837721984078384;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x429f0000))) ) ) {
    result[0] += 0.30157011369788844;
    result[1] += 0.14591229020032484;
    result[2] += 0.028965890633459664;
    result[3] += 0.09014618299945858;
    result[4] += 0.16080129940443963;
    result[5] += 0.27260422306442883;
  } else {
    result[0] += 0.01325088339222615;
    result[1] += 0.01236749116607774;
    result[2] += 0.7738515901060071;
    result[3] += 0.1298586572438163;
    result[4] += 0.015017667844522969;
    result[5] += 0.05565371024734983;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3124831490967916;
    result[1] += 0.12806686438393097;
    result[2] += 0.036397950930169856;
    result[3] += 0.0989485036397951;
    result[4] += 0.1464006470746832;
    result[5] += 0.2777028848746293;
  } else {
    result[0] += 0.02864816472694718;
    result[1] += 0.010743061772605193;
    result[2] += 0.8021486123545211;
    result[3] += 0.10384959713518353;
    result[4] += 0.007162041181736795;
    result[5] += 0.047448522829006266;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.31087533156498676;
    result[1] += 0.1413793103448276;
    result[2] += 0.027586206896551724;
    result[3] += 0.08859416445623342;
    result[4] += 0.13978779840848807;
    result[5] += 0.2917771883289125;
  } else {
    result[0] += 0.024621212121212124;
    result[1] += 0.01325757575757576;
    result[2] += 0.8153409090909092;
    result[3] += 0.10416666666666669;
    result[4] += 0.007575757575757577;
    result[5] += 0.03503787878787879;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x429f0000))) ) ) {
    result[0] += 0.3042763157894737;
    result[1] += 0.15899122807017543;
    result[2] += 0.023848684210526317;
    result[3] += 0.08552631578947369;
    result[4] += 0.14144736842105263;
    result[5] += 0.28591008771929827;
  } else {
    result[0] += 0.023769100169779286;
    result[1] += 0.008488964346349746;
    result[2] += 0.7852292020373515;
    result[3] += 0.11884550084889643;
    result[4] += 0.011035653650254669;
    result[5] += 0.05263157894736842;
  }
  
  // Average tree outputs
  result[0] /= 20;
  result[1] /= 20;
  result[2] /= 20;
  result[3] /= 20;
  result[4] /= 20;
  result[5] /= 20;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_146/split_4/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
