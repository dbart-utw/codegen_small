
#include "header.h"


static const int32_t num_class[] = {  6, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 36;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[28].missing != -1) || ((*( ((int*)(data)) + 28 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.30093708165997324;
    result[1] += 0.1394912985274431;
    result[2] += 0.03400267737617135;
    result[3] += 0.08942436412315931;
    result[4] += 0.14752342704149934;
    result[5] += 0.2886211512717537;
  } else {
    result[0] += 0.005499541704857928;
    result[1] += 0.00458295142071494;
    result[2] += 0.8258478460128322;
    result[3] += 0.10724106324472961;
    result[4] += 0.006416131989000917;
    result[5] += 0.05041246562786435;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.305659369994661;
    result[1] += 0.13641217298451683;
    result[2] += 0.033368926855312335;
    result[3] += 0.100640683395622;
    result[4] += 0.1436198611852643;
    result[5] += 0.2802989855846236;
  } else {
    result[0] += 0.013888888888888888;
    result[1] += 0.019444444444444445;
    result[2] += 0.7824074074074074;
    result[3] += 0.1175925925925926;
    result[4] += 0.012962962962962963;
    result[5] += 0.053703703703703705;
  }
  if ( ( !(data[32].missing != -1) || ((*( ((int*)(data)) + 32 ))<=((int)(0x429a0000))) ) ) {
    result[0] += 0.324757004002287;
    result[1] += 0.14379645511720984;
    result[2] += 0.016009148084619784;
    result[3] += 0.08376214979988565;
    result[4] += 0.1403659233847913;
    result[5] += 0.29130931961120643;
  } else {
    result[0] += 0.009789156626506024;
    result[1] += 0.0030120481927710845;
    result[2] += 0.7093373493975904;
    result[3] += 0.16415662650602408;
    result[4] += 0.01581325301204819;
    result[5] += 0.09789156626506024;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.3012994044396318;
    result[1] += 0.12723335138061723;
    result[2] += 0.02490525175961018;
    result[3] += 0.08933405522468868;
    result[4] += 0.14672441797509475;
    result[5] += 0.31050351922035735;
  } else {
    result[0] += 0.027385159010600707;
    result[1] += 0.01060070671378092;
    result[2] += 0.8100706713780919;
    result[3] += 0.10512367491166077;
    result[4] += 0.0017667844522968198;
    result[5] += 0.045053003533568906;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x429f0000))) ) ) {
    result[0] += 0.30194360799343006;
    result[1] += 0.14399124007664932;
    result[2] += 0.024363536819052834;
    result[3] += 0.09334793320558445;
    result[4] += 0.14645496851902545;
    result[5] += 0.2898987133862579;
  } else {
    result[0] += 0.025575447570332484;
    result[1] += 0.010230179028132995;
    result[2] += 0.7774936061381075;
    result[3] += 0.12702472293265135;
    result[4] += 0.003410059676044331;
    result[5] += 0.05626598465473146;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.28293736501079914;
    result[1] += 0.14227861771058314;
    result[2] += 0.03266738660907127;
    result[3] += 0.09773218142548597;
    result[4] += 0.13822894168466524;
    result[5] += 0.30615550755939525;
  } else {
    result[0] += 0.017825311942959002;
    result[1] += 0.008912655971479501;
    result[2] += 0.8502673796791443;
    result[3] += 0.0873440285204991;
    result[4] += 0.008021390374331552;
    result[5] += 0.027629233511586453;
  }
  if ( ( !(data[20].missing != -1) || ((*( ((int*)(data)) + 20 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.2963062820167161;
    result[1] += 0.13534645456996494;
    result[2] += 0.03127527635481262;
    result[3] += 0.09652197357778376;
    result[4] += 0.14720949042868697;
    result[5] += 0.29334052305203556;
  } else {
    result[0] += 0.0026857654431512988;
    result[1] += 0.0053715308863025975;
    result[2] += 0.8415398388540736;
    result[3] += 0.09847806624888095;
    result[4] += 0.0026857654431512988;
    result[5] += 0.04923903312444047;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.2983170466883822;
    result[1] += 0.13897937024972856;
    result[2] += 0.03745928338762215;
    result[3] += 0.10586319218241043;
    result[4] += 0.13789359391965256;
    result[5] += 0.28148751357220414;
  } else {
    result[0] += 0.014010507880910683;
    result[1] += 0.009632224168126095;
    result[2] += 0.7950963222416813;
    result[3] += 0.11558669001751314;
    result[4] += 0.009632224168126095;
    result[5] += 0.05604203152364273;
  }
  if ( ( !(data[16].missing != -1) || ((*( ((int*)(data)) + 16 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.29310344827586204;
    result[1] += 0.13687002652519895;
    result[2] += 0.02546419098143236;
    result[3] += 0.09283819628647215;
    result[4] += 0.14482758620689656;
    result[5] += 0.30689655172413793;
  } else {
    result[0] += 0.01231060606060606;
    result[1] += 0;
    result[2] += 0.8607954545454546;
    result[3] += 0.09659090909090909;
    result[4] += 0;
    result[5] += 0.030303030303030304;
  }
  if ( ( !(data[16].missing != -1) || ((*( ((int*)(data)) + 16 ))<=((int)(0x429d0000))) ) ) {
    result[0] += 0.31421376608841634;
    result[1] += 0.14185786233911585;
    result[2] += 0.00923335198656967;
    result[3] += 0.09065472859541131;
    result[4] += 0.15584778959149412;
    result[5] += 0.2881925013989927;
  } else {
    result[0] += 0.01757188498402556;
    result[1] += 0.001597444089456869;
    result[2] += 0.7771565495207667;
    result[3] += 0.14217252396166133;
    result[4] += 0.004792332268370607;
    result[5] += 0.05670926517571885;
  }
  if ( ( !(data[12].missing != -1) || ((*( ((int*)(data)) + 12 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.30384930384930386;
    result[1] += 0.14605514605514605;
    result[2] += 0.03221403221403221;
    result[3] += 0.08872508872508872;
    result[4] += 0.14523614523614523;
    result[5] += 0.2839202839202839;
  } else {
    result[0] += 0.02407566638005159;
    result[1] += 0.009458297506448839;
    result[2] += 0.8134135855546002;
    result[3] += 0.09544282029234738;
    result[4] += 0.0034393809114359416;
    result[5] += 0.05417024935511608;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.30072173215717724;
    result[1] += 0.14648489708634055;
    result[2] += 0.031007751937984496;
    result[3] += 0.09435979684576316;
    result[4] += 0.13900026730820636;
    result[5] += 0.2884255546645282;
  } else {
    result[0] += 0.011981566820276499;
    result[1] += 0.018433179723502304;
    result[2] += 0.7870967741935484;
    result[3] += 0.11428571428571428;
    result[4] += 0.016589861751152075;
    result[5] += 0.05161290322580645;
  }
  if ( ( !(data[24].missing != -1) || ((*( ((int*)(data)) + 24 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.30655957161981257;
    result[1] += 0.13520749665327977;
    result[2] += 0.040160642570281124;
    result[3] += 0.08969210174029452;
    result[4] += 0.13440428380187416;
    result[5] += 0.29397590361445786;
  } else {
    result[0] += 0.01466544454628781;
    result[1] += 0.013748854262144821;
    result[2] += 0.8038496791934006;
    result[3] += 0.11640696608615948;
    result[4] += 0.007332722273143905;
    result[5] += 0.043996333638863426;
  }
  if ( ( !(data[8].missing != -1) || ((*( ((int*)(data)) + 8 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.2981366459627329;
    result[1] += 0.13502565487442614;
    result[2] += 0.03942749122333243;
    result[3] += 0.09640831758034027;
    result[4] += 0.15257899000810154;
    result[5] += 0.2784229003510667;
  } else {
    result[0] += 0.01869991095280499;
    result[1] += 0.012466607301869994;
    result[2] += 0.8058771148708817;
    result[3] += 0.09260908281389138;
    result[4] += 0.0035618878005342835;
    result[5] += 0.06678539626001782;
  }
  if ( ( !(data[27].missing != -1) || ((*( ((int*)(data)) + 27 ))<=((int)(0x42930000))) ) ) {
    result[0] += 0.03498727735368957;
    result[1] += 0.017811704834605598;
    result[2] += 0.015267175572519083;
    result[3] += 0.1431297709923664;
    result[4] += 0.18002544529262088;
    result[5] += 0.6087786259541985;
  } else {
    result[0] += 0.3315918869084204;
    result[1] += 0.15611555009219422;
    result[2] += 0.30178242163491087;
    result[3] += 0.08205285802089736;
    result[4] += 0.07744314689612784;
    result[5] += 0.051014136447449294;
  }
  if ( ( !(data[32].missing != -1) || ((*( ((int*)(data)) + 32 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.30305466237942125;
    result[1] += 0.13719185423365488;
    result[2] += 0.03563772775991426;
    result[3] += 0.09646302250803858;
    result[4] += 0.12888531618435156;
    result[5] += 0.2987674169346195;
  } else {
    result[0] += 0.010968921389396709;
    result[1] += 0.004570383912248629;
    result[2] += 0.8071297989031079;
    result[3] += 0.10237659963436929;
    result[4] += 0.018281535648994516;
    result[5] += 0.056672760511883;
  }
  if ( ( !(data[15].missing != -1) || ((*( ((int*)(data)) + 15 ))<=((int)(0x42930000))) ) ) {
    result[0] += 0.041927409261576974;
    result[1] += 0.004380475594493116;
    result[2] += 0.0012515644555694619;
    result[3] += 0.12015018773466833;
    result[4] += 0.20775969962453067;
    result[5] += 0.6245306633291614;
  } else {
    result[0] += 0.32651796778190834;
    result[1] += 0.15706319702602234;
    result[2] += 0.31536555142503103;
    result[3] += 0.0808550185873606;
    result[4] += 0.0731102850061958;
    result[5] += 0.047087980173482036;
  }
  if ( ( !(data[20].missing != -1) || ((*( ((int*)(data)) + 20 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.29879518072289163;
    result[1] += 0.14136546184738957;
    result[2] += 0.031593038821954494;
    result[3] += 0.0995983935742972;
    result[4] += 0.14136546184738957;
    result[5] += 0.2872824631860777;
  } else {
    result[0] += 0.006416131989000917;
    result[1] += 0.007332722273143905;
    result[2] += 0.8313473877176902;
    result[3] += 0.10174152153987168;
    result[4] += 0.0018331805682859762;
    result[5] += 0.051329055912007336;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x429d0000))) ) ) {
    result[0] += 0.2951233183856502;
    result[1] += 0.148542600896861;
    result[2] += 0.015975336322869956;
    result[3] += 0.09052690582959641;
    result[4] += 0.14882286995515695;
    result[5] += 0.3010089686098655;
  } else {
    result[0] += 0.011923688394276632;
    result[1] += 0.004769475357710652;
    result[2] += 0.7591414944356122;
    result[3] += 0.13672496025437206;
    result[4] += 0.0039745627980922104;
    result[5] += 0.08346581875993642;
  }
  if ( ( !(data[16].missing != -1) || ((*( ((int*)(data)) + 16 ))<=((int)(0x42a20000))) ) ) {
    result[0] += 0.2947680690399137;
    result[1] += 0.14455231930960086;
    result[2] += 0.02481121898597627;
    result[3] += 0.09007551240560949;
    result[4] += 0.1372707659115426;
    result[5] += 0.30852211434735705;
  } else {
    result[0] += 0.007155635062611807;
    result[1] += 0;
    result[2] += 0.851520572450805;
    result[3] += 0.10822898032200358;
    result[4] += 0.0008944543828264759;
    result[5] += 0.03220035778175313;
  }
  
  // Average tree outputs
  result[0] /= 20;
  result[1] /= 20;
  result[2] /= 20;
  result[3] /= 20;
  result[4] /= 20;
  result[5] /= 20;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_146/split_1/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
