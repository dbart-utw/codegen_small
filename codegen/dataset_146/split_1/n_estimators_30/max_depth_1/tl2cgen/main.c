
#include "header.h"


static const int32_t num_class[] = {  6, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 36;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[32].missing != -1) || (data[32].fvalue <= (float)81) ) ) {
    result[0] += 0.31183651804670914;
    result[1] += 0.14384288747346072;
    result[2] += 0.04272823779193206;
    result[3] += 0.0881104033970276;
    result[4] += 0.12951167728237792;
    result[5] += 0.28397027600849256;
  } else {
    result[0] += 0.005671077504725898;
    result[1] += 0.004725897920604915;
    result[2] += 0.8119092627599244;
    result[3] += 0.09735349716446125;
    result[4] += 0.014177693761814745;
    result[5] += 0.0661625708884688;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)82.5) ) ) {
    result[0] += 0.2851196670135276;
    result[1] += 0.13033298647242456;
    result[2] += 0.04526534859521332;
    result[3] += 0.11316337148803329;
    result[4] += 0.1425598335067638;
    result[5] += 0.28355879292403746;
  } else {
    result[0] += 0.006109979633401222;
    result[1] += 0.003054989816700611;
    result[2] += 0.8818737270875764;
    result[3] += 0.07535641547861507;
    result[4] += 0;
    result[5] += 0.03360488798370672;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)81) ) ) {
    result[0] += 0.28765300691857376;
    result[1] += 0.14183076104310807;
    result[2] += 0.030601383714741887;
    result[3] += 0.09872272485364557;
    result[4] += 0.14901543374135182;
    result[5] += 0.2921766897285791;
  } else {
    result[0] += 0.0028089887640449437;
    result[1] += 0.008426966292134831;
    result[2] += 0.846441947565543;
    result[3] += 0.09363295880149813;
    result[4] += 0.0018726591760299626;
    result[5] += 0.04681647940074907;
  }
  if ( ( !(data[23].missing != -1) || (data[23].fvalue <= (float)73.5) ) ) {
    result[0] += 0.030845157310302282;
    result[1] += 0.01418877236273905;
    result[2] += 0.01418877236273905;
    result[3] += 0.13756940160394818;
    result[4] += 0.19494139420111042;
    result[5] += 0.608266502159161;
  } else {
    result[0] += 0.340405616224649;
    result[1] += 0.15538221528861154;
    result[2] += 0.31138845553822153;
    result[3] += 0.07145085803432137;
    result[4] += 0.06115444617784711;
    result[5] += 0.060218408736349455;
  }
  if ( ( !(data[4].missing != -1) || (data[4].fvalue <= (float)81) ) ) {
    result[0] += 0.3163872363439697;
    result[1] += 0.13088155759870201;
    result[2] += 0.03623580313683072;
    result[3] += 0.09518658734451055;
    result[4] += 0.13899405083829097;
    result[5] += 0.28231476473769607;
  } else {
    result[0] += 0.022163120567375884;
    result[1] += 0.005319148936170212;
    result[2] += 0.804964539007092;
    result[3] += 0.10638297872340423;
    result[4] += 0.006205673758865247;
    result[5] += 0.05496453900709219;
  }
  if ( ( !(data[24].missing != -1) || (data[24].fvalue <= (float)81) ) ) {
    result[0] += 0.3077337644839666;
    result[1] += 0.130423066558879;
    result[2] += 0.035839396389113445;
    result[3] += 0.09539207760711399;
    result[4] += 0.1441659929938022;
    result[5] += 0.28644570196712477;
  } else {
    result[0] += 0.016143497757847534;
    result[1] += 0.007174887892376682;
    result[2] += 0.809865470852018;
    result[3] += 0.10134529147982063;
    result[4] += 0.019730941704035873;
    result[5] += 0.045739910313901344;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)79.5) ) ) {
    result[0] += 0.2981007431874484;
    result[1] += 0.13790255986787778;
    result[2] += 0.02972749793559042;
    result[3] += 0.09633911368015415;
    result[4] += 0.15854665565648224;
    result[5] += 0.279383429672447;
  } else {
    result[0] += 0.02347024308466052;
    result[1] += 0.01760268231349539;
    result[2] += 0.7661357921207042;
    result[3] += 0.10980720871751885;
    result[4] += 0.004191114836546521;
    result[5] += 0.07879295892707461;
  }
  if ( ( !(data[0].missing != -1) || (data[0].fvalue <= (float)79.5) ) ) {
    result[0] += 0.3032293377120963;
    result[1] += 0.13902572523262177;
    result[2] += 0.027093596059113302;
    result[3] += 0.10454296661193213;
    result[4] += 0.14313081554460866;
    result[5] += 0.28297755883962783;
  } else {
    result[0] += 0.032423208191126277;
    result[1] += 0.00938566552901024;
    result[2] += 0.7465870307167235;
    result[3] += 0.12713310580204779;
    result[4] += 0.010238907849829351;
    result[5] += 0.07423208191126279;
  }
  if ( ( !(data[4].missing != -1) || (data[4].fvalue <= (float)81) ) ) {
    result[0] += 0.3013625434143735;
    result[1] += 0.13999465669249264;
    result[2] += 0.030991183542612877;
    result[3] += 0.10125567726422656;
    result[4] += 0.14667379107667647;
    result[5] += 0.279722148009618;
  } else {
    result[0] += 0.024007386888273315;
    result[1] += 0.008310249307479225;
    result[2] += 0.8162511542012927;
    result[3] += 0.08771929824561403;
    result[4] += 0.010156971375807941;
    result[5] += 0.05355493998153278;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.2944012858290919;
    result[1] += 0.13929815162068043;
    result[2] += 0.032413608357889104;
    result[3] += 0.10608090008036433;
    result[4] += 0.13956603268148945;
    result[5] += 0.28824002143048494;
  } else {
    result[0] += 0.024702653247941447;
    result[1] += 0.013723696248856358;
    result[2] += 0.807868252516011;
    result[3] += 0.10978956999085086;
    result[4] += 0.006404391582799634;
    result[5] += 0.03751143641354071;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)79.5) ) ) {
    result[0] += 0.30842163970998326;
    result[1] += 0.15142219743446736;
    result[2] += 0.0192414947016174;
    result[3] += 0.08728388176240937;
    result[4] += 0.14696040156162857;
    result[5] += 0.28667038482989404;
  } else {
    result[0] += 0.02741935483870967;
    result[1] += 0.012096774193548383;
    result[2] += 0.7653225806451611;
    result[3] += 0.132258064516129;
    result[4] += 0.008870967741935482;
    result[5] += 0.054032258064516114;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)81) ) ) {
    result[0] += 0.3019523936881519;
    result[1] += 0.13800481412142285;
    result[2] += 0.036373361861460285;
    result[3] += 0.09601497726664884;
    result[4] += 0.13666755817063386;
    result[5] += 0.2909868948916823;
  } else {
    result[0] += 0.008279668813247472;
    result[1] += 0.004599816007359706;
    result[2] += 0.8353265869365226;
    result[3] += 0.0956761729530819;
    result[4] += 0.005519779208831648;
    result[5] += 0.05059797608095677;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)81) ) ) {
    result[0] += 0.307982740021575;
    result[1] += 0.1423948220064725;
    result[2] += 0.0337108953613808;
    result[3] += 0.10167206040992449;
    result[4] += 0.1348435814455232;
    result[5] += 0.27939590075512405;
  } else {
    result[0] += 0.011627906976744186;
    result[1] += 0.0035778175313059034;
    result[2] += 0.8237924865831843;
    result[3] += 0.10286225402504472;
    result[4] += 0.008050089445438283;
    result[5] += 0.05008944543828265;
  }
  if ( ( !(data[19].missing != -1) || (data[19].fvalue <= (float)74.5) ) ) {
    result[0] += 0.0425160163075131;
    result[1] += 0.0052417006406523005;
    result[2] += 0.0052417006406523005;
    result[3] += 0.14793244030285382;
    result[4] += 0.2131624927198602;
    result[5] += 0.5859056493884682;
  } else {
    result[0] += 0.3435188163396591;
    result[1] += 0.16564811836603413;
    result[2] += 0.3168221293020264;
    result[3] += 0.08041170794467675;
    result[4] += 0.05435831457060149;
    result[5] += 0.03924091347700226;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)78.5) ) ) {
    result[0] += 0.3060941828254848;
    result[1] += 0.13739612188365652;
    result[2] += 0.02188365650969529;
    result[3] += 0.08836565096952909;
    result[4] += 0.1448753462603878;
    result[5] += 0.3013850415512465;
  } else {
    result[0] += 0.023848684210526317;
    result[1] += 0.008223684210526315;
    result[2] += 0.7467105263157895;
    result[3] += 0.1356907894736842;
    result[4] += 0.005756578947368421;
    result[5] += 0.07976973684210527;
  }
  if ( ( !(data[24].missing != -1) || (data[24].fvalue <= (float)81) ) ) {
    result[0] += 0.29367225527312063;
    result[1] += 0.14710654407787993;
    result[2] += 0.032720389399675504;
    result[3] += 0.09545700378583018;
    result[4] += 0.13818280151433207;
    result[5] += 0.2928610059491617;
  } else {
    result[0] += 0.011524822695035462;
    result[1] += 0.013297872340425534;
    result[2] += 0.7996453900709221;
    result[3] += 0.11081560283687944;
    result[4] += 0.011524822695035462;
    result[5] += 0.053191489361702135;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)81) ) ) {
    result[0] += 0.3034998664173123;
    result[1] += 0.15121560245792146;
    result[2] += 0.020838899278653487;
    result[3] += 0.0953780390061448;
    result[4] += 0.14453646807373766;
    result[5] += 0.28453112476623027;
  } else {
    result[0] += 0.01754385964912281;
    result[1] += 0;
    result[2] += 0.847645429362881;
    result[3] += 0.1043397968605725;
    result[4] += 0.0027700831024930752;
    result[5] += 0.02770083102493075;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.29636557990379475;
    result[1] += 0.1386958845537146;
    result[2] += 0.031266702298236235;
    result[3] += 0.10101549973276323;
    result[4] += 0.13308391234633885;
    result[5] += 0.2995724211651523;
  } else {
    result[0] += 0.023985239852398525;
    result[1] += 0.0036900369003690036;
    result[2] += 0.8145756457564576;
    result[3] += 0.09778597785977859;
    result[4] += 0.006457564575645757;
    result[5] += 0.05350553505535055;
  }
  if ( ( !(data[15].missing != -1) || (data[15].fvalue <= (float)73.5) ) ) {
    result[0] += 0.030914826498422712;
    result[1] += 0.008201892744479496;
    result[2] += 0.004416403785488959;
    result[3] += 0.13123028391167194;
    result[4] += 0.19558359621451105;
    result[5] += 0.6296529968454259;
  } else {
    result[0] += 0.33292193767355754;
    result[1] += 0.15087935822277074;
    result[2] += 0.3063869176180191;
    result[3] += 0.08083924714594261;
    result[4] += 0.06880592409750078;
    result[5] += 0.0601666152422092;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)79.5) ) ) {
    result[0] += 0.2974910394265233;
    result[1] += 0.145023435346016;
    result[2] += 0.022332506203473945;
    result[3] += 0.0865729252826027;
    result[4] += 0.14226633581472292;
    result[5] += 0.30631375792666116;
  } else {
    result[0] += 0.025020850708924104;
    result[1] += 0.009174311926605505;
    result[2] += 0.7564637197664721;
    result[3] += 0.14428690575479566;
    result[4] += 0.004170141784820684;
    result[5] += 0.060884070058381985;
  }
  if ( ( !(data[16].missing != -1) || (data[16].fvalue <= (float)79.5) ) ) {
    result[0] += 0.3009413067552603;
    result[1] += 0.1356589147286822;
    result[2] += 0.014673311184939093;
    result[3] += 0.08803986710963456;
    result[4] += 0.15254706533776305;
    result[5] += 0.308139534883721;
  } else {
    result[0] += 0.01729818780889621;
    result[1] += 0;
    result[2] += 0.7932454695222405;
    result[3] += 0.13756177924217464;
    result[4] += 0.0016474464579901153;
    result[5] += 0.05024711696869852;
  }
  if ( ( !(data[15].missing != -1) || (data[15].fvalue <= (float)74.5) ) ) {
    result[0] += 0.046413502109704644;
    result[1] += 0.008438818565400843;
    result[2] += 0.0024110910186859553;
    result[3] += 0.13321277878239904;
    result[4] += 0.19529837251356238;
    result[5] += 0.6142254370102471;
  } else {
    result[0] += 0.3305967792863909;
    result[1] += 0.16293021787180298;
    result[2] += 0.32649194821597727;
    result[3] += 0.07483422797600253;
    result[4] += 0.058414903694347965;
    result[5] += 0.04673192295547837;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)81) ) ) {
    result[0] += 0.2953074433656958;
    result[1] += 0.14374325782092773;
    result[2] += 0.036677454153182305;
    result[3] += 0.10302049622437973;
    result[4] += 0.14617044228694714;
    result[5] += 0.2750809061488673;
  } else {
    result[0] += 0.012522361359570662;
    result[1] += 0.011627906976744186;
    result[2] += 0.8291592128801432;
    result[3] += 0.0742397137745975;
    result[4] += 0.0017889087656529517;
    result[5] += 0.0706618962432916;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)81) ) ) {
    result[0] += 0.29685399300887333;
    result[1] += 0.13874697499327776;
    result[2] += 0.03361118580263512;
    result[3] += 0.09411132024737832;
    result[4] += 0.13444474321054048;
    result[5] += 0.30223178273729495;
  } else {
    result[0] += 0.006323396567299007;
    result[1] += 0.00993676603432701;
    result[2] += 0.8202348690153568;
    result[3] += 0.10659439927732611;
    result[4] += 0.01084010840108401;
    result[5] += 0.04607046070460705;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)79.5) ) ) {
    result[0] += 0.31701244813278007;
    result[1] += 0.1380359612724758;
    result[2] += 0.017427385892116183;
    result[3] += 0.08713692946058091;
    result[4] += 0.13997233748271093;
    result[5] += 0.3004149377593361;
  } else {
    result[0] += 0.028075970272502065;
    result[1] += 0.007431874483897605;
    result[2] += 0.772914946325351;
    result[3] += 0.13872832369942195;
    result[4] += 0.009083402146985962;
    result[5] += 0.04376548307184145;
  }
  if ( ( !(data[28].missing != -1) || (data[28].fvalue <= (float)81) ) ) {
    result[0] += 0.2940383059077421;
    result[1] += 0.14189371459401132;
    result[2] += 0.03075263015915835;
    result[3] += 0.09927164823307257;
    result[4] += 0.15052603183166982;
    result[5] += 0.28351766927434585;
  } else {
    result[0] += 0.00804289544235925;
    result[1] += 0.00804289544235925;
    result[2] += 0.8248436103663985;
    result[3] += 0.09562109025915996;
    result[4] += 0.008936550491510277;
    result[5] += 0.05451295799821269;
  }
  if ( ( !(data[12].missing != -1) || (data[12].fvalue <= (float)81) ) ) {
    result[0] += 0.2954301075268817;
    result[1] += 0.14086021505376345;
    result[2] += 0.03064516129032258;
    result[3] += 0.09408602150537634;
    result[4] += 0.14301075268817204;
    result[5] += 0.29596774193548386;
  } else {
    result[0] += 0.023508137432188065;
    result[1] += 0.014466546112115732;
    result[2] += 0.798372513562387;
    result[3] += 0.10488245931283906;
    result[4] += 0.003616636528028933;
    result[5] += 0.05515370705244123;
  }
  if ( ( !(data[20].missing != -1) || (data[20].fvalue <= (float)79.5) ) ) {
    result[0] += 0.3114620201470188;
    result[1] += 0.13612850530901172;
    result[2] += 0.020147018785733734;
    result[3] += 0.093111897631364;
    result[4] += 0.1464742717124966;
    result[5] += 0.29267628641437515;
  } else {
    result[0] += 0.01040763226366002;
    result[1] += 0.00520381613183001;
    result[2] += 0.7979184735472681;
    result[3] += 0.12142237640936689;
    result[4] += 0.006071118820468345;
    result[5] += 0.058976582827406775;
  }
  if ( ( !(data[8].missing != -1) || (data[8].fvalue <= (float)81) ) ) {
    result[0] += 0.3032984714400644;
    result[1] += 0.138911236256369;
    result[2] += 0.03700724054706356;
    result[3] += 0.11075355323142934;
    result[4] += 0.14802896218825423;
    result[5] += 0.2620005363368195;
  } else {
    result[0] += 0.013673655423883319;
    result[1] += 0.010938924339106655;
    result[2] += 0.8122151321786691;
    result[3] += 0.11030082041932543;
    result[4] += 0.0027347310847766638;
    result[5] += 0.05013673655423884;
  }
  if ( ( !(data[7].missing != -1) || (data[7].fvalue <= (float)73.5) ) ) {
    result[0] += 0.02890528905289053;
    result[1] += 0.02152521525215252;
    result[2] += 0.014760147601476014;
    result[3] += 0.13468634686346864;
    result[4] += 0.21709717097170972;
    result[5] += 0.5830258302583026;
  } else {
    result[0] += 0.3496875;
    result[1] += 0.1590625;
    result[2] += 0.3015625;
    result[3] += 0.073125;
    result[4] += 0.0625;
    result[5] += 0.0540625;
  }
  
  // Average tree outputs
  result[0] /= 30;
  result[1] /= 30;
  result[2] /= 30;
  result[3] /= 30;
  result[4] /= 30;
  result[5] /= 30;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_146/split_1/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
