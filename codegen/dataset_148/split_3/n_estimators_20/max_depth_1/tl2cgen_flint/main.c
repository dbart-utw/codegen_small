
#include "header.h"


static const int32_t num_class[] = {  7, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 7;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[0].missing != -1) || ((*( ((int*)(data)) + 0 ))<=((int)(0x42b70000))) ) ) {
    result[0] += 0.8411359976577368;
    result[1] += 0.0014639145073927682;
    result[2] += 0.0025472112428634166;
    result[3] += 0.10223978919631094;
    result[4] += 0.052232469623773974;
    result[5] += 0.00014639145073927682;
    result[6] += 0.0002342263211828429;
  } else {
    result[0] += 0.5817014446227929;
    result[1] += 0;
    result[2] += 0.005564472980203317;
    result[3] += 0.3403959336543606;
    result[4] += 0.07169609416800428;
    result[5] += 0.00010700909577314071;
    result[6] += 0.0005350454788657035;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.11543307086614173;
    result[1] += 0.0012598425196850393;
    result[2] += 0.0034645669291338585;
    result[3] += 0.4966929133858268;
    result[4] += 0.3822047244094488;
    result[5] += 0.0009448818897637795;
    result[6] += 0;
  } else {
    result[0] += 0.901372812920592;
    result[1] += 0.000915208613728129;
    result[2] += 0.0026110363391655448;
    result[3] += 0.09491251682368773;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.0001884253028263795;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40800000))) ) ) {
    result[0] += 0.18908382066276802;
    result[1] += 0.0034654537578514186;
    result[2] += 0.006064544076239983;
    result[3] += 0.45722330517652154;
    result[4] += 0.344162876326619;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8537921456677725;
    result[1] += 0.0003857727027235553;
    result[2] += 0.002648972558701746;
    result[3] += 0.12154411953810149;
    result[4] += 0.021268935010158682;
    result[5] += 0.00018002726127099247;
    result[6] += 0.00018002726127099247;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40800000))) ) ) {
    result[0] += 0.19662921348314608;
    result[1] += 0.006050129645635264;
    result[2] += 0.0058340535868625755;
    result[3] += 0.43971477960242006;
    result[4] += 0.35177182368193605;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8576610413665363;
    result[1] += 0.00030870549495781024;
    result[2] += 0.002495369417575633;
    result[3] += 0.11864581189545174;
    result[4] += 0.020271660835562873;
    result[5] += 0.0002829800370446594;
    result[6] += 0.0003344309528709611;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8335764979351616;
    result[1] += 0.00039565765721209724;
    result[2] += 0.0030416182398179973;
    result[3] += 0.13835653700635525;
    result[4] += 0.024060931279210662;
    result[5] += 0.00029674324290907293;
    result[6] += 0.00027201463933331687;
  } else {
    result[0] += 0.0914733747141457;
    result[1] += 0.006860503103560928;
    result[2] += 0.001633453119895459;
    result[3] += 0.40868997059784384;
    result[4] += 0.4913426984645541;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8375949899749994;
    result[1] += 0.0003712963192158222;
    result[2] += 0.0026733334983539197;
    result[3] += 0.13478056387534346;
    result[4] += 0.02376296442981262;
    result[5] += 0.0003712963192158222;
    result[6] += 0.0004455555830589866;
  } else {
    result[0] += 0.08642373427926475;
    result[1] += 0.0064495324089003546;
    result[2] += 0.0012899064817800709;
    result[3] += 0.41889712995807804;
    result[4] += 0.4869396968719768;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9990840044273119;
    result[1] += 0;
    result[2] += 0.0008396626082973933;
    result[3] += 0;
    result[4] += 0;
    result[5] += 0;
    result[6] += 7.633296439067211e-05;
  } else {
    result[0] += 0.4638996473784612;
    result[1] += 0.0024278860049713855;
    result[2] += 0.005838487773859761;
    result[3] += 0.38383721602404763;
    result[4] += 0.14295624024510087;
    result[5] += 0.0005780680964217584;
    result[6] += 0.0004624544771374068;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8424234915128237;
    result[1] += 0.0004212613059100483;
    result[2] += 0.002750588526824433;
    result[3] += 0.13096270598438856;
    result[4] += 0.022971131210506753;
    result[5] += 0.0001486804609094288;
    result[6] += 0.00032214099863709576;
  } else {
    result[0] += 0.09411764705882353;
    result[1] += 0.006041335453100159;
    result[2] += 0.0022257551669316376;
    result[3] += 0.41558028616852144;
    result[4] += 0.4820349761526232;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.11520882584712372;
    result[1] += 0.0018912529550827422;
    result[2] += 0.005200945626477541;
    result[3] += 0.4983451536643026;
    result[4] += 0.37777777777777777;
    result[5] += 0.0015760441292356187;
    result[6] += 0;
  } else {
    result[0] += 0.9024895707172655;
    result[1] += 0.0006190283945633158;
    result[2] += 0.0026645135244247075;
    result[3] += 0.09398465886152604;
    result[4] += 0;
    result[5] += 2.6914278024491992e-05;
    result[6] += 0.00021531422419593594;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9988989711074833;
    result[1] += 0;
    result[2] += 0.0009111963248414899;
    result[3] += 0;
    result[4] += 3.7966513535062085e-05;
    result[5] += 0;
    result[6] += 0.00015186605414024834;
  } else {
    result[0] += 0.45883107045044;
    result[1] += 0.0023891381621117653;
    result[2] += 0.005419264611619371;
    result[3] += 0.389895693724142;
    result[4] += 0.14264902977681956;
    result[5] += 0.00034962997494318517;
    result[6] += 0.0004661732999242469;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9992327463843174;
    result[1] += 0;
    result[2] += 0.0005754402117619979;
    result[3] += 0;
    result[4] += 3.83626807841332e-05;
    result[5] += 0;
    result[6] += 0.0001534507231365328;
  } else {
    result[0] += 0.45712155108128266;
    result[1] += 0.0025813113061435213;
    result[2] += 0.005621522400045891;
    result[3] += 0.3933344805828028;
    result[4] += 0.13990707279297887;
    result[5] += 0.0006883496816382724;
    result[6] += 0.0007457121551081283;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9991986567961536;
    result[1] += 0;
    result[2] += 0.0006487064031137907;
    result[3] += 0;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.00015263680073265663;
  } else {
    result[0] += 0.46617323927373655;
    result[1] += 0.0017925292008789176;
    result[2] += 0.00630276396438071;
    result[3] += 0.3834277784202614;
    result[4] += 0.1417832774372615;
    result[5] += 0.00023129409043598937;
    result[6] += 0.0002891176130449867;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40800000))) ) ) {
    result[0] += 0.20163546374004734;
    result[1] += 0.003443081557994405;
    result[2] += 0.0066709705186141595;
    result[3] += 0.43770174306003873;
    result[4] += 0.35054874112330536;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8550176305561988;
    result[1] += 0.0005662368414279462;
    result[2] += 0.002084781097984711;
    result[3] += 0.12042828095642548;
    result[4] += 0.02141404782127506;
    result[5] += 0.0002831184207139731;
    result[6] += 0.00020590430597379862;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41c40000))) ) ) {
    result[0] += 0.06062729980725426;
    result[1] += 0.002453127737865779;
    result[2] += 0.006833712984054671;
    result[3] += 0.49798493078675315;
    result[4] += 0.4301734711757491;
    result[5] += 0.0019274575083231122;
    result[6] += 0;
  } else {
    result[0] += 0.8931018971767256;
    result[1] += 0.0006614981610351122;
    result[2] += 0.0027782922763474713;
    result[3] += 0.10316725319503608;
    result[4] += 0;
    result[5] += 2.6459926441404486e-05;
    result[6] += 0.0002645992644140449;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9991673920448094;
    result[1] += 0;
    result[2] += 0.0007569163229005034;
    result[3] += 0;
    result[4] += 3.7845816145025166e-05;
    result[5] += 0;
    result[6] += 3.7845816145025166e-05;
  } else {
    result[0] += 0.4626690870761843;
    result[1] += 0.002576564970428061;
    result[2] += 0.006441412426070153;
    result[3] += 0.3856063711424723;
    result[4] += 0.14176963166832582;
    result[5] += 0.0005855829478245594;
    result[6] += 0.0003513497686947356;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8382749993807436;
    result[1] += 0.0004458646057813777;
    result[2] += 0.003096281984592901;
    result[3] += 0.1355923806692923;
    result[4] += 0.022070297986178197;
    result[5] += 9.908102350697283e-05;
    result[6] += 0.0004210943499046345;
  } else {
    result[0] += 0.09172259507829977;
    result[1] += 0.006072227548737616;
    result[2] += 0.0019175455417066154;
    result[3] += 0.4129114733141579;
    result[4] += 0.4873761585170981;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.11243531441116512;
    result[1] += 0.002352203230359103;
    result[2] += 0.003606711619883958;
    result[3] += 0.493021797083268;
    result[4] += 0.3876430923631802;
    result[5] += 0.0009408812921436412;
    result[6] += 0;
  } else {
    result[0] += 0.903967890526089;
    result[1] += 0.00048487460603938257;
    result[2] += 0.002585997898876707;
    result[3] += 0.09277267462220187;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.00018856234679309324;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9990425857843137;
    result[1] += 0;
    result[2] += 0.0007276348039215686;
    result[3] += 0;
    result[4] += 7.659313725490196e-05;
    result[5] += 0;
    result[6] += 0.00015318627450980392;
  } else {
    result[0] += 0.4618702553485163;
    result[1] += 0.0019553715205889123;
    result[2] += 0.007131354957441915;
    result[3] += 0.38877386703473665;
    result[4] += 0.1395215090867265;
    result[5] += 0.0005175983436853004;
    result[6] += 0.0002300437083045779;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.10496807350879925;
    result[1] += 0.002024606759071796;
    result[2] += 0.0029590406478741628;
    result[3] += 0.49836474069459585;
    result[4] += 0.38997040959352125;
    result[5] += 0.0017131287961376733;
    result[6] += 0;
  } else {
    result[0] += 0.9009142641387309;
    result[1] += 0.0008090833086113434;
    result[2] += 0.002750883249278568;
    result[3] += 0.09517516653631437;
    result[4] += 0;
    result[5] += 8.090833086113435e-05;
    result[6] += 0.00026969443620378117;
  }
  if ( ( !(data[0].missing != -1) || ((*( ((int*)(data)) + 0 ))<=((int)(0x42b70000))) ) ) {
    result[0] += 0.8399941055113469;
    result[1] += 0.001031535514294135;
    result[2] += 0.0026819923371647508;
    result[3] += 0.10347774830533452;
    result[4] += 0.05263778367226643;
    result[5] += 0.00011788977306218685;
    result[6] += 5.8944886531093426e-05;
  } else {
    result[0] += 0.5945663531870428;
    result[1] += 0;
    result[2] += 0.005747126436781608;
    result[3] += 0.328735632183908;
    result[4] += 0.07032392894461859;
    result[5] += 0.0003134796238244514;
    result[6] += 0.0003134796238244514;
  }
  
  // Average tree outputs
  result[0] /= 20;
  result[1] /= 20;
  result[2] /= 20;
  result[3] /= 20;
  result[4] /= 20;
  result[5] /= 20;
  result[6] /= 20;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  result[6] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_148/split_3/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
