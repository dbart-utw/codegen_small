
#include "header.h"


static const int32_t num_class[] = {  7, };

int32_t get_num_target(void) {
  return N_TARGET;
}
void get_num_class(int32_t* out) {
  for (int i = 0; i < N_TARGET; ++i) {
    out[i] = num_class[i];
  }
}
int32_t get_num_feature(void) {
  return 7;
}
const char* get_threshold_type(void) {
  return "float32";
}
const char* get_leaf_output_type(void) {
  return "float32";
}


void predict(union Entry* data, int pred_margin, float* result) {
  unsigned int tmp;
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.10461538461538462;
    result[1] += 0.0018461538461538463;
    result[2] += 0.004307692307692308;
    result[3] += 0.5006153846153847;
    result[4] += 0.38738461538461544;
    result[5] += 0.001230769230769231;
    result[6] += 0;
  } else {
    result[0] += 0.8997567567567567;
    result[1] += 0.0006486486486486486;
    result[2] += 0.002405405405405405;
    result[3] += 0.09678378378378379;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.0004054054054054054;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40e00000))) ) ) {
    result[0] += 0.24757373929590865;
    result[1] += 0.0020932445290199808;
    result[2] += 0.005137963843958135;
    result[3] += 0.4192197906755471;
    result[4] += 0.3259752616555661;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8607661132174138;
    result[1] += 0.00039220813178193216;
    result[2] += 0.002144071120407896;
    result[3] += 0.11729637861158318;
    result[4] += 0.018982873578245518;
    result[5] += 0.00015688325271277288;
    result[6] += 0.0002614720878546215;
  }
  if ( ( !(data[3].missing != -1) || ((*( ((int*)(data)) + 3 ) ^ (0b1 << 31))>((int)(0x3f000000))) ) ) {
    result[0] += 0.7647899788957724;
    result[1] += 0.0005446252297637689;
    result[2] += 0.0031996732248621416;
    result[3] += 0.1887126421131459;
    result[4] += 0.04227653346041255;
    result[5] += 0.0001361563074409422;
    result[6] += 0.0003403907686023555;
  } else {
    result[0] += 0.8032348755683593;
    result[1] += 0.000867724133143591;
    result[2] += 0.0023949186074763112;
    result[3] += 0.13390718822671896;
    result[4] += 0.05900524105376419;
    result[5] += 0.00024296275728020547;
    result[6] += 0.0003470896532574364;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9992745876603543;
    result[1] += 0;
    result[2] += 0.0006108735491753207;
    result[3] += 0;
    result[4] += 7.635919364691509e-05;
    result[5] += 0;
    result[6] += 3.8179596823457546e-05;
  } else {
    result[0] += 0.45753408828287495;
    result[1] += 0.002195516524150682;
    result[2] += 0.005488791310376704;
    result[3] += 0.39103304830136354;
    result[4] += 0.14259302056852322;
    result[5] += 0.0006933210076265311;
    result[6] += 0.00046221400508435407;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.12004254672542167;
    result[1] += 0.001975383680291749;
    result[2] += 0.003342956997416806;
    result[3] += 0.49384592007293726;
    result[4] += 0.3792736666160158;
    result[5] += 0.00151952590791673;
    result[6] += 0;
  } else {
    result[0] += 0.9012161759527615;
    result[1] += 0.0007855033993336764;
    result[2] += 0.0019502153362767139;
    result[3] += 0.09575015574636365;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.00029794956526449796;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40800000))) ) ) {
    result[0] += 0.20120767737761483;
    result[1] += 0.003019193444037093;
    result[2] += 0.004960103515203796;
    result[3] += 0.45287901660556396;
    result[4] += 0.3379340090575803;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8544373826004169;
    result[1] += 0.00030877698582199015;
    result[2] += 0.002676067210457248;
    result[3] += 0.11965108200602116;
    result[4] += 0.02241206288757945;
    result[5] += 0.0001801199083961609;
    result[6] += 0.000334508401307156;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40800000))) ) ) {
    result[0] += 0.2031545741324921;
    result[1] += 0.0056782334384858045;
    result[2] += 0.005467928496319664;
    result[3] += 0.4466876971608833;
    result[4] += 0.33901156677181915;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8536585365853658;
    result[1] += 0.0004645760743321719;
    result[2] += 0.0019099238611433734;
    result[3] += 0.12275132275132275;
    result[4] += 0.020467157052522906;
    result[5] += 0.00033552716479545746;
    result[6] += 0.0004129565105174861;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.999385513480298;
    result[1] += 0;
    result[2] += 0.0005376757047392273;
    result[3] += 0;
    result[4] += 3.840540748137338e-05;
    result[5] += 0;
    result[6] += 3.840540748137338e-05;
  } else {
    result[0] += 0.4565914557324476;
    result[1] += 0.0017752834726835415;
    result[2] += 0.005497652044439354;
    result[3] += 0.3945710686061161;
    result[4] += 0.14047646317718473;
    result[5] += 0.0004581376703699462;
    result[6] += 0.0006299392967586759;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8421039640618059;
    result[1] += 0.0005923878165572396;
    result[2] += 0.002715110825887348;
    result[3] += 0.13185565483536557;
    result[4] += 0.022362640075035793;
    result[5] += 9.873130275953992e-05;
    result[6] += 0.00027151108258873484;
  } else {
    result[0] += 0.09511051574012057;
    result[1] += 0.004018754186202277;
    result[2] += 0.002344273275284662;
    result[3] += 0.412926992632284;
    result[4] += 0.4855994641661085;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[2].missing != -1) || ((*( ((int*)(data)) + 2 ))<=((int)(0x40e00000))) ) ) {
    result[0] += 0.24237623762376237;
    result[1] += 0.004554455445544554;
    result[2] += 0.005346534653465347;
    result[3] += 0.41188118811881186;
    result[4] += 0.33584158415841586;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.8601560468140442;
    result[1] += 0.00023407022106631989;
    result[2] += 0.002860858257477243;
    result[3] += 0.11794538361508453;
    result[4] += 0.018309492847854356;
    result[5] += 0.00013003901170351105;
    result[6] += 0.00036410923276983096;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.12094801223241591;
    result[1] += 0.0015290519877675843;
    result[2] += 0.003516819571865444;
    result[3] += 0.5006116207951071;
    result[4] += 0.3718654434250765;
    result[5] += 0.0015290519877675843;
    result[6] += 0;
  } else {
    result[0] += 0.9021645021645022;
    result[1] += 0.000487012987012987;
    result[2] += 0.00229978354978355;
    result[3] += 0.09483225108225109;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.00021645021645021645;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.837397568885698;
    result[1] += 0.00037135147178966654;
    result[2] += 0.0027232441264575546;
    result[3] += 0.1340826380808556;
    result[4] += 0.02485579184512168;
    result[5] += 0.00027232441264575546;
    result[6] += 0.00029708117743173324;
  } else {
    result[0] += 0.10106211779851947;
    result[1] += 0.0054715159317669775;
    result[2] += 0.001287415513356936;
    result[3] += 0.43031863533955583;
    result[4] += 0.4618603154168008;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8392155894193483;
    result[1] += 0.0003951690582627379;
    result[2] += 0.002766183407839166;
    result[3] += 0.13467855466916936;
    result[4] += 0.022722220850107434;
    result[5] += 0.0001234903307071056;
    result[6] += 9.879226456568448e-05;
  } else {
    result[0] += 0.09730986383261375;
    result[1] += 0.005978080371969445;
    result[2] += 0.0036532713384257723;
    result[3] += 0.41680504815675856;
    result[4] += 0.4762537363002325;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8378030359309611;
    result[1] += 0.0004457321149988857;
    result[2] += 0.0033182279672139266;
    result[3] += 0.13354629423272169;
    result[4] += 0.024440977639105563;
    result[5] += 0.00019810316222172697;
    result[6] += 0.0002476289527771587;
  } else {
    result[0] += 0.09913378248315688;
    result[1] += 0.0060956047481552774;
    result[2] += 0.0019249278152069298;
    result[3] += 0.43760025665704205;
    result[4] += 0.4552454282964389;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9991203916169497;
    result[1] += 0;
    result[2] += 0.000650145326602417;
    result[3] += 0;
    result[4] += 0.00011473152822395595;
    result[5] += 0;
    result[6] += 0.00011473152822395595;
  } else {
    result[0] += 0.46444213923467037;
    result[1] += 0.0021323190410327338;
    result[2] += 0.007491931765790687;
    result[3] += 0.3856615952051637;
    result[4] += 0.13900414937759337;
    result[5] += 0.00040341171046565235;
    result[6] += 0.0008644536652835408;
  }
  if ( ( !(data[5].missing != -1) || ((*( ((int*)(data)) + 5 ))<=((int)(0x42af0000))) ) ) {
    result[0] += 0.8386488765438224;
    result[1] += 0.00017360249987599823;
    result[2] += 0.002256832498387977;
    result[3] += 0.1347403402608998;
    result[4] += 0.023659540697386044;
    result[5] += 0.00014880214275085564;
    result[6] += 0.0003720053568771391;
  } else {
    result[0] += 0.09030837004405286;
    result[1] += 0.005978602894902455;
    result[2] += 0.0025173064820641915;
    result[3] += 0.43014474512271866;
    result[4] += 0.4710509754562618;
    result[5] += 0;
    result[6] += 0;
  }
  if ( ( !(data[4].missing != -1) || ((*( ((int*)(data)) + 4 ))<=((int)(0x41cc0000))) ) ) {
    result[0] += 0.11455484655120024;
    result[1] += 0.0018231540565177757;
    result[2] += 0.003494378608325737;
    result[3] += 0.497569127924643;
    result[4] += 0.38119112731692495;
    result[5] += 0.0013673655423883319;
    result[6] += 0;
  } else {
    result[0] += 0.8973942250392762;
    result[1] += 0.0008667858497210033;
    result[2] += 0.0020315293352836015;
    result[3] += 0.09930115390866244;
    result[4] += 0;
    result[5] += 0;
    result[6] += 0.0004063058670567203;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9993478844604704;
    result[1] += 0;
    result[2] += 0.000498676589052131;
    result[3] += 0;
    result[4] += 3.835973761939469e-05;
    result[5] += 0;
    result[6] += 0.00011507921285818407;
  } else {
    result[0] += 0.46193563192014225;
    result[1] += 0.0018358097642131835;
    result[2] += 0.006769548505536114;
    result[3] += 0.3814468475704205;
    result[4] += 0.1474384716883713;
    result[5] += 0.0002868452756583099;
    result[6] += 0.0002868452756583099;
  }
  if ( ( !(data[0].missing != -1) || ((*( ((int*)(data)) + 0 ))<=((int)(0x42b70000))) ) ) {
    result[0] += 0.8422326514950265;
    result[1] += 0.0009740547241654122;
    result[2] += 0.002007143067977213;
    result[3] += 0.10251188051595383;
    result[4] += 0.052038135718291564;
    result[5] += 8.855042946958293e-05;
    result[6] += 0.00014758404911597155;
  } else {
    result[0] += 0.5888161313792746;
    result[1] += 0;
    result[2] += 0.004573329175761356;
    result[3] += 0.33177424384159654;
    result[4] += 0.0741087205072238;
    result[5] += 0.00020787859889824346;
    result[6] += 0.0005196964972456087;
  }
  if ( ( !(data[6].missing != -1) || ((*( ((int*)(data)) + 6 ))<=((int)(0x40400000))) ) ) {
    result[0] += 0.9995820351090509;
    result[1] += 0;
    result[2] += 0.00034197127441294934;
    result[3] += 0;
    result[4] += 7.599361653621096e-05;
    result[5] += 0;
    result[6] += 0;
  } else {
    result[0] += 0.4605401001047608;
    result[1] += 0.0024444185775811898;
    result[2] += 0.006169246886276336;
    result[3] += 0.38621813525782794;
    result[4] += 0.14369689209637992;
    result[5] += 0.00046560353858689327;
    result[6] += 0.00046560353858689327;
  }
  
  // Average tree outputs
  result[0] /= 20;
  result[1] /= 20;
  result[2] /= 20;
  result[3] /= 20;
  result[4] /= 20;
  result[5] /= 20;
  result[6] /= 20;
  
  // Apply base_scores
  result[0] += 0;
  result[1] += 0;
  result[2] += 0;
  result[3] += 0;
  result[4] += 0;
  result[5] += 0;
  result[6] += 0;
  
  // Apply postprocessor
  if (!pred_margin) { postprocess(result); }
}

void postprocess(float* result) {
  // Do nothing
}


int main() {
    float result[MAX_N_CLASS];
    union Entry input[TEST_DATA_COLS];
    char line[1024];
    

    FILE* file = fopen("./codegen/dataset_148/split_0/test_data.csv", "r");
    if (file == NULL) {
        printf("Error opening file\n");
        return 1;
    }

    while (fgets(line, sizeof(line), file)) {
        char *ptr = line;
        for (int i = 0; i < TEST_DATA_COLS; i++) {
            sscanf(ptr, "%f", &(input[i].fvalue));
            input[i].missing = -1;
            while (*ptr != ',' && *ptr != '\n' && *ptr != '\0') ptr++;  // Skip to next comma
            if (*ptr == ',') ptr++;  // Move past the comma
        }
        predict(input, 0, result);
        
    }
    

    return 0;
}
